<!DOCTYPE html>
<html lang="en">
    <head><title>Wolf Sheep Grass (Predator Prey)</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content=""/>

    <meta property="og:title" content="
     -&nbsp;Wolf Sheep Grass (Predator Prey)" />
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https:&#x2F;&#x2F;krABMaga.github.io&#x2F;wolfsheepgrass&#x2F;"/>
    <meta property="og:description" content=""/>
    <link rel="preload" href="/assets/fonts/FiraCode-Regular.woff" as="font" type="font/woff" crossorigin>
    <link rel="preload" href="/assets/fonts/FiraCode-Bold.woff" as="font" type="font/woff" crossorigin>

    <link rel="stylesheet" href="https://krABMaga.github.io/style.css">
    <link rel="stylesheet" href=" https://krABMaga.github.io/color/orange.css">
    <link rel="stylesheet" href="https://krABMaga.github.io/custom.css">
    
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.2.1/dist/chart.min.js"
        integrity="sha256-uVEHWRIr846/vAdLJeybWxjPNStREzOlqLMXjW/Saeo=" crossorigin="anonymous"></script><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
        
    </head>
    <body>
        <div class="container full">

<style>
/* background: #211f1a
/* The sticky class is added to the header with JS when it reaches its scroll position */
.header {
  /* overflow: hidden; */
  padding: 10px 10px 0px 0px;
  background: #211f1a ;
  z-index:99;
}

.content {
  z-index:0;
  position:relative;
  padding: 10px 0px 0px 0px;

}

.sticky {
  position: fixed;
  top: 0;
  width: 100%;
  padding: 10px 90px 0px 0px;

 
}

@media(max-width: 683px) 
{
  .sticky {
    padding: 10px 30px 0px 0px;
  }
}

</style>


 <header class="header" id="myHeader" style="background: #211f1a ;" >
    <div class="header__inner">
        <div class="header__logo">
            <a href="https:&#x2F;&#x2F;krABMaga.github.io&#x2F;">
    <div class="logo">
        <img style="width: 50;height:50px;margin-left: auto;margin-right: auto;" src="https://krABMaga.github.io/images/krabmaga.png"/>
        <!-- krABMaga -->

    </div>
</a>
        </div>
        <div class="menu-trigger">menu</div>
      </div>
      
    <nav class="menu">
        <ul class="menu__inner menu__inner--desktop">
            
            
                 
                        <li>
                            <a href="https://krABMaga.github.io">Home</a>
                        </li>
                <li>
                            <a href="https://docs.rs/krabmaga">Docs</a>
                        </li>
                

                <ul class="menu__sub-inner">
                    <li class="menu__sub-inner-more-trigger">Examples ▾</li>
                    <ul class="menu__sub-inner-more hidden">
                        
        <li>
            <a href="https://krABMaga.github.io/template">Template</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/antsforaging">Ants Foraging</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/flockers">Flockers</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/forestfire">Forest fire</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/schelling">Schelling</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/sugarscape">Sugarscape</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/virusnetwork">Virus on a Network</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/wolfsheepgrass">Wolf Sheep Grass</a>
        </li>
                    </ul>
                </ul>

                <li></li>

                
                 
                    <li>
                         <a href="https://krABMaga.github.io/model_exp">Model Exploration</a>
                    </li>
                
                 
                    <li>
                         <a href="https://krABMaga.github.io/benchmarks">Benchmarks</a>
                    </li>
                
                 
                    <li>
                         <a href="https://krABMaga.github.io/contrib">Contributors</a>
                    </li>
                <!---->

                <!---->
                
            </ul>

        <ul class="menu__inner menu__inner--mobile">
            
        <li>
            <a href="https://krABMaga.github.io">Home</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/template">Template</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/antsforaging">Ants Foraging</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/flockers">Flockers</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/forestfire">Forest fire</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/schelling">Schelling</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/sugarscape">Sugarscape</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/virusnetwork">Virus on a Network</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/wolfsheepgrass">Wolf Sheep Grass</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/model_exp">Model Exploration</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/benchmarks">Benchmarks</a>
        </li>
        <li>
            <a href="https://krABMaga.github.io/contrib">Contributors</a>
        </li>
        </ul>
    </nav>

    </header>

<script>
  window.onscroll = function() {myFunction()};
  
  var header = document.getElementById("myHeader");
  var sticky = header.offsetTop;
  
  function myFunction() {
    if (window.pageYOffset > sticky) {
      header.classList.add("sticky");
    } else {
      header.classList.remove("sticky");
    }
  }
</script>


<div class="content"><div class="post">

    <h1 class="post-title">
        <a href="https:&#x2F;&#x2F;krABMaga.github.io&#x2F;wolfsheepgrass&#x2F;">Wolf Sheep Grass (Predator Prey) - Last updated: 2025-12-11</a>
    </h1>

    
    <div class="post-meta">
        <span class="post-date"></span>

        <span class="post-author"></span>

        

    
    </div>


    <div class="post-content">

        <div class="page-container">
            <div class="main-content">
                <div class="text-content">
                    <h1 id="wolf-sheep-grass-predator-prey">Wolf Sheep Grass (Predator Prey)<a class="zola-anchor" href="#wolf-sheep-grass-predator-prey" aria-label="Anchor link for: wolf-sheep-grass-predator-prey">§</a>
</h1>
<hr />
<p>Also known as Wolf Sheep predation, it is the simulation implemented to introduce &quot;dynamic scheduling&quot; feature into the krABMaga framework, because it was the first model with the concepts of &quot;death&quot; and &quot;birth&quot;: there is an ecosystem that involves animals into their life-cycle.</p>
<p>The main objective is to understand and explore the stability of this ecosystem, trying to change life parameters (like <code>GAIN_ENEGRY</code>) or population size.</p>
<p>There are currently two versions of this model:</p>
<ul>
<li>The simulation without the visualization framework. Outputs are the interaction between 2 agents (wolf eats sheep) and animal death. At each output, its step number is associated;</li>
<li>The simulation with the visualization framework enabled (either natively or compiled to WebAssembly). Allows the viewer to see wolves and sheeps moving around the map. Wolves try to follow sheeps. Grass growth is represented by different colors. Only when grass is dark green (full grown), it can be eaten by sheeps;</li>
</ul>
<hr />
<h1 id="implementation">Implementation<a class="zola-anchor" href="#implementation" aria-label="Anchor link for: implementation">§</a>
</h1>
<p>With this example we tested mulit-agent scheduling: wolves and sheeps are different entities with their methods implementation, but both are <code>Agent</code>.</p>
<p><code>Wolf</code> and <code>Sheep</code> structs have same fields:</p>
<pre data-lang="rs" class="language-rs "><code class="language-rs" data-lang="rs">#[derive(Copy, Clone)]
pub struct Sheep&#x2F;Wolf {
    pub id: u32,
    pub animal_state: LifeState,
    pub loc: Int2D,
    pub last: Option&lt;Int2D&gt;,
    pub energy: f64,
    pub gain_energy: f64,
    pub prob_reproduction: f64,
}
</code></pre>
<p>They &quot;move&quot; on different Grid, because each grid can contain a single type of entity. For the same reason, grass has its own grid.
To manage the process of birth and death, there are several elements into <code>State</code> struct:</p>
<ul>
<li><code>next_id</code> to properly assign id to animals when reproduction happens;</li>
<li><code>new_sheeps</code> and <code>new_wolves</code> are vectors to store agents created during this step. during <code>after_step</code> phase, <code>State</code> add these new elements to scheduler;</li>
<li><code>killed_sheep</code> allow to remove correct elements at the end of current step and they are use to prevent two agents on a same &quot;prey&quot;, because food can be eaten only by one agent.</li>
</ul>
<p>Before grids and schedule update, Animals can check prey state through <code>LifeState</code> enum:</p>
<pre data-lang="rs" class="language-rs "><code class="language-rs" data-lang="rs">#[derive(Clone, Copy, PartialEq)]
pub enum LifeState {
    Alive,
    Dead,
}
</code></pre>

                </div>

                <div class="wasm-column">
                    <div class="wasm-content">

                        <div class="wasm-figure">
                            <figure>
                                <figcaption class="wasm-warning">This is the WebAssembly powered simulation currently running at near-native
                                    speed in your browser!
                                </figcaption>
                                <iframe src="https://krABMaga.github.io/wasm_container.html?sim=wolfsheepgrass"
                                        class="wasm-iframe" name="webgl" id="wasm-iframe"></iframe>
                            </figure>
                        </div>

                        <a href="https://github.com/krABMaga/examples/tree/main/wolfsheepgrass"
                        class="github-corner" aria-label="View source on Github">
                            <svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true">
                                <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
                                <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
                                      fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
                                <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
                                      fill="currentColor" class="octo-body"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>

            
            
            
            
        </div>

    </div>
</div>

<script>
    (function () {

        // Wait for the iframe to fully load, by observing changes in the body tag since the wasm module is deferred.
        const iframe = document.getElementById('wasm-iframe');
        iframe.contentWindow.addEventListener('DOMContentLoaded', (event) => {
            const targetNode = iframe.contentDocument.body;
            const config = {childList: true, subtree: true};

            const callback = function (mutationsList, observer) {
                // Update the iframe div parent (and the iframe itself) size
                const canvas = iframe.contentDocument.querySelector('canvas');
                iframe.style.minWidth = canvas.style.width;
                iframe.setAttribute("style","min-width:" + canvas.style.width);
                const canvasObserver = new MutationObserver((mutlist, obs) => {
                    iframe.style.height = canvas.clientHeight + "px";
                });
                canvasObserver.observe(canvas, {attributes: true});
            };

            const observer = new MutationObserver(callback);

            observer.observe(targetNode, config);

            const resizeCallback = () => {
                const canvas = iframe.contentDocument.querySelector('canvas');
                iframe.style.height = canvas.clientHeight + "px";
            }

            window.addEventListener('resize', resizeCallback);
        });
    })();
</script>



</div>
    <div class="pagination">
        <div class="pagination__buttons">
            </div>
    </div>
<footer class="footer">
                    <div class="footer__inner"><div class="copyright copyright--user">© krABMaga MIT License</div>
    <script type="text/javascript" src="https://krABMaga.github.io/assets/js/main.js"></script>
</div>
                    

                </footer></div>
    </body>
</html>
